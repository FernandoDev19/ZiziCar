<h1 class="text-gray-700 text-lg font-semibold mb-5">Crear nuevo usuario</h1>
<form [formGroup]="userForm">
  <div class="mb-5">
    <label for="name" class="text-gray-600 font-semibold">Nombre</label>
    <div class="flex">
      <span
        class="inline-flex items-center px-3 border border-r-0 rounded-l-md bg-gray-200"
      >
        <fa-icon [icon]="faUser"></fa-icon>
      </span>
      <input
        formControlName="name"
        id="name"
        type="text"
        placeholder="Ej. Juanito Enrique..."
        maxlength="30"
        class="form-input w-full border rounded-r-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>
    @if (userForm.get('name')?.invalid && userForm.get('name')?.touched) {
    <div>
      @if (userForm.get('name')?.errors?.['required']) {
      <small class="text-red-500">El nombre es requerido.</small>
      } @else if (userForm.get('name')?.errors?.['maxlength']){
      <small class="text-red-500">El nombre es demasiado largo.</small>
      }
    </div>
    }
  </div>

  <div class="mb-5">
    <label for="email" class="text-gray-600 font-semibold">Email</label>
    <div class="flex">
      <span
        class="inline-flex items-center font-extrabold px-3 border border-r-0 rounded-l-md bg-gray-200"
      >
        {{ "@" }}
      </span>
      <input
        formControlName="email"
        id="email"
        type="email"
        maxlength="60"
        placeholder="Ej. ejemplo@ejemplo"
        class="form-input w-full border rounded-r-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>
    @if (userForm.get('email')?.invalid && userForm.get('email')?.touched) {
    <div>
      @if (userForm.get('email')?.errors?.['required']) {
      <small class="text-red-500">El correo electrónico es requerido.</small>
      }@else if (userForm.get('email')?.errors?.['email']){
      <small class="text-red-500"
        >Debe ser una dirección de correo válida.</small
      >
      }@else if(userForm.get('email')?.errors?.['maxlength']){
      <small class="text-red-500">
        La dirección de correo es demasiado larga.
      </small>
      }
    </div>
    }
  </div>

  <div class="mb-5">
    <label for="password" class="text-gray-600 font-semibold">Contraseña</label>
    <div class="flex">
      <span
        class="inline-flex items-center px-3 border border-r-0 rounded-l-md bg-gray-200"
      >
        <fa-icon [icon]="faUser"></fa-icon>
      </span>
      <input
        formControlName="password"
        id="password"
        type="password"
        placeholder="Debe contener..."
        class="form-input w-full border rounded-r-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
    </div>
    @if (userForm.get('password')?.invalid && userForm.get('password')?.touched)
    {
    <div>
      @if (userForm.get('password')?.errors?.['required']) {
      <small class="text-red-500">La contraseña es obligatoria.</small>
      }@else if (userForm.get('password')?.errors?.['minlength']) {
      <small class="text-red-500"
        >La contraseña debe tener un mínimo de 8 caracteres.</small
      >
      }@else if(userForm.get('password')?.errors?.['pattern']){
      <small class="text-red-500"
        >La contraseña debe tener mínimo una mayúscula, una minúscula y un
        numero.</small
      >
      }
    </div>
    }
  </div>

  <div class="mb-5">
    <label for="role" class="text-gray-600 font-semibold">Role</label>
    <div class="flex">
      <span
        class="inline-flex items-center px-3 border border-r-0 rounded-l-md bg-gray-200"
      >
        <fa-icon [icon]="faGuard"></fa-icon>
      </span>
      <select
        id="role"
        (change)="changeRole($event)"
        formControlName="role"
        class="form-input w-full border rounded-r-md py-3 px-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
      >
        <option value="" selected disabled>Seleccionar role</option>
        <option value="user">Usuario</option>
        <option value="admin">Administrador</option>
        <option value="provider">Proveedor</option>
        <option value="employe">Empleado</option>
      </select>
    </div>
    @if (userForm.get('role')?.invalid && userForm.get('role')?.touched)
    {
    <div>
      @if (userForm.get('role')?.errors?.['required']) {
        <small class="text-red-500">El rol es obligatorio.</small>
      }@else if (userForm.get('role')?.errors?.['invalidRole']) {
        <small class="text-red-500">El rol seleccionado no es válido. Debe ser "Usuario", "Administrador", "Proveedor" o "Empleado".</small>
      }
    </div>
    }
  </div>
</form>
